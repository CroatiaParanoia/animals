(this.webpackJsonpanimals=this.webpackJsonpanimals||[]).push([[0],[,,,,,,,,,function(e,n,r){e.exports=r(19)},,,,,function(e,n,r){},function(e,n){},,function(e,n){},function(e,n,r){},function(e,n,r){"use strict";r.r(n);var t,a=r(0),o=r.n(a),c=r(7),i=r.n(c),u=(r(14),r(3)),l=r(2),f=r(1),d=r.n(f),s=r(8),v=function(e,n){var r=Object(a.useRef)((function(){return new Error("\u521d\u59cb\u5316\u672a\u5b8c\u6210")}));return Object(a.useEffect)((function(){r.current=e}),[e].concat(Object(s.a)(n))),Object(a.useCallback)((function(){var e=r.current;return e.apply(void 0,arguments)}),[r])},b=function(e,n){return new f.Point(e,n)};!function(e){e.Alliance="Alliance",e.Orc="Orc",e.Unknow="Unknow"}(t||(t={}));var m=[{name:"\u8c61",displayName:"\ud83d\udc18",level:7},{name:"\u72ee",displayName:"\ud83e\udd81",level:6},{name:"\u864e",displayName:"\ud83d\udc2f",level:5},{name:"\u8c79",displayName:"\ud83d\udc06",level:4},{name:"\u72fc",displayName:"\ud83d\udc3a",level:3},{name:"\u72d7",displayName:"\ud83d\udc36",level:2},{name:"\u732b",displayName:"\ud83d\udc08",level:1},{name:"\u9f20",displayName:"\ud83d\udc2d",level:0}],w={startX:50,startY:50,rowCount:3,columnCount:3,gridWidth:10,gridSize:100,cardAreaSize:70},O={hoverBorderColor:"rgba(0, 0, 128, 0.3)",activeBorderColor:"rgba(0, 0, 128, 0.8)"},y="blue",C="red",p="skyblue",h=42,j=function(){var e=function(e){return m.map((function(n){return Object(l.a)(Object(l.a)({},n),{},{camp:e})}))};return e(t.Alliance).concat(e(t.Orc)).sort((function(){return Math.random()-.5}))},A=function(e){for(var n=e.startY,r=e.startX,t=e.rowCount,a=e.columnCount,o=e.gridSize,c=e.gridWidth,i=[],u=0;u<a+1;u+=1){var l=n+u*(o+c);i.push({x:r,y:l,width:t*(o+c)+c,height:c})}for(var s=0;s<t+1;s+=1){var v=r+s*(o+c);i.push({x:v,y:n,width:c,height:a*(o+c)+c})}return i.map((function(e){var n=e.x,r=e.y,t=e.width,a=e.height,o=new d.a.Shape.Rectangle(b(n,r),function(e,n){return new f.Size(e,n)}(t,a));return o.fillColor=new d.a.Color(1,0,0,.3),o}))},g=function(e){var n=e.location,r=e.color,t=e.size,a=e.cardAreaSize,o=e.cardAreaInfoArr,c=t||new d.a.Size(a,a),i=function(e){var n=e.x,r=e.y,t=e.cardAreaInfoArr.find((function(e){return e.x===n&&e.y===r}));return t?new d.a.Point(t.centerOffsetX,t.centerOffsetY):new d.a.Point(0,0)}(Object(l.a)(Object(l.a)({},n),{},{cardAreaInfoArr:o})),u=i.x,f=i.y,s=u-c.width/2-4,v=f-c.height/2-4,b=new d.a.Path;b.lineTo(new d.a.Point(s,v)),b.lineTo(new d.a.Point(s+20,v)),b.lineTo(new d.a.Point(s+20,v+4)),b.lineTo(new d.a.Point(s+4,v+4)),b.lineTo(new d.a.Point(s+4,v+20)),b.lineTo(new d.a.Point(s,v+20)),b.lineTo(new d.a.Point(s,v)),b.fillColor=r;var m=b.clone();m.rotate(270,new d.a.Point(u,f));var w=new d.a.Group([b,m]),O=w.clone();O.rotate(180,new d.a.Point(u,f));var y=new d.a.Group([w,O]);return y.data=n,y},S=function(e){var n=e.cardAreaInfo,r=e.cardSize,a=n.centerOffsetX,o=n.centerOffsetY,c=n.card;if(c){var i,u,l=c.camp,s=c.displayName,v=b(a,o),m=(i=v,u=r,new f.Path.Circle(i,u)),w=new d.a.PointText(v);return l!==t.Unknow&&(w.content=s,w.fontSize=h,w.justification="center",w.translate(b(0,15))),m.fillColor=new d.a.Color(function(e){switch(e){case t.Alliance:return y;case t.Orc:return C;default:return p}}(l)),m.shadowColor=new d.a.Color("rgba(0, 0, 0, .8)"),m.shadowOffset=b(0,0),m.shadowBlur=5,m}},k=function(e){var n=e.cardAreaInfoArr,r=e.cardLayer,t=Object(a.useCallback)((function(){return n.map((function(e){return S({cardAreaInfo:e,cardSize:30})}))}),[n]);Object(a.useEffect)((function(){null===r||void 0===r||r.activate();var e=t();return function(){e.forEach((function(e){return null===e||void 0===e?void 0:e.remove()}))}}),[r,n,t])},L=function(e){var n=e.cardAreaInfoArr;return{getCardInfoByLocation:Object(a.useCallback)((function(e){var r=e.x,t=e.y;return n.find((function(e){return e.x===r&&e.y===t}))}),[n]),computedCardInfoByLocation:Object(a.useCallback)((function(e,r){var t=e.x,a=e.y;return n.map((function(e){return e.x===t&&e.y===a?Object(l.a)(Object(l.a)({},e),{},{card:r}):e}))}),[n])}},E=function(){var e=Object(a.useRef)(),n=Object(a.useState)({gridLayer:null,cardLayer:null,operationLayer:null}),r=Object(u.a)(n,2),t=r[0],o=r[1];return Object(a.useEffect)((function(){if(e.current){d.a.setup(e.current);var n=new d.a.Layer,r=new d.a.Layer,t=new d.a.Layer;o({gridLayer:n,cardLayer:r,operationLayer:t})}}),[]),[e,t]},z=function(){var e=Object(a.useRef)(j());return{getCard:Object(a.useCallback)((function(){return e.current.shift()}),[]),resetCards:Object(a.useCallback)((function(){e.current=j()}),[])}},I=function(e){for(var n=e.rowCount,r=e.columnCount,t=e.startX,a=e.startY,o=e.gridSize,c=e.gridWidth,i=[],u=n+1,l=r+1,f=0;f<u;f+=1)for(var d=0;d<l;d+=1){var s=t+f*(c+o)+c/2,v=a+d*(c+o)+c/2;i.push({x:f,y:d,centerOffsetX:s,centerOffsetY:v})}return i}(Object(l.a)({},w)),P=function(){var e=E(),n=Object(u.a)(e,2),r=n[0],o=n[1],c=o.gridLayer,i=o.cardLayer,f=o.operationLayer,s=Object(a.useState)(),b=Object(u.a)(s,2),m=b[0],y=b[1],C=Object(a.useState)(),p=Object(u.a)(C,2),h=p[0],S=p[1],P=Object(a.useState)(I),x=Object(u.a)(P,2),B=x[0],M=x[1];k({cardAreaInfoArr:B,cardLayer:i});var N=z().getCard,T=L({cardAreaInfoArr:B}),X=T.getCardInfoByLocation,Y=T.computedCardInfoByLocation;Object(a.useEffect)((function(){var e=[{location:m,color:O.activeBorderColor},{location:h,color:O.hoverBorderColor}].map((function(e){if(e.location)return null===f||void 0===f||f.activate(),g({location:e.location,color:new d.a.Color(e.color),cardAreaInfoArr:B,cardAreaSize:w.cardAreaSize})}));return function(){e.forEach((function(e){return null===e||void 0===e?void 0:e.remove()}))}}),[f,m,h]),Object(a.useEffect)((function(){M((function(e){return function(e){var n=j().map((function(e){return Object(l.a)(Object(l.a)({},e),{},{camp:t.Unknow})}));return e.map((function(e,r){return Object(l.a)(Object(l.a)({},e),{},{card:n[r]})}))}(e)}))}),[]);var R=Object(a.useCallback)((function(e){var n=X(e);if(null===n||void 0===n?void 0:n.card){var r=N();if(r){var t=Y(e,Object(l.a)({},r));M(t)}}}),[X,Y,M,N]),W=v((function(e){S(e)}),[]),U=v((function(){S(void 0)}),[]),G=v((function(e){R(e),y(e)}),[R]),J=Object(a.useCallback)((function(){return null===c||void 0===c||c.activate(),A(Object(l.a)({},w))}),[c]),$=Object(a.useCallback)((function(){return null===f||void 0===f||f.activate(),function(e){var n=e.cardAreaInfoArr,r=e.cardAreaSize,t=e.onCardAreaMouseClick,a=e.onCardAreaMouseEnter,o=e.onCardAreaMouseLeave;return n.map((function(e){var n=e.centerOffsetX-r/2,c=e.centerOffsetY-r/2,i={x:e.x,y:e.y},u=new d.a.Shape.Rectangle(new d.a.Point(n,c),new d.a.Size(r,r));return u.fillColor=new d.a.Color(1,0,0,1),u.opacity=0,u.radius=r/2,u.onClick=function(){null===t||void 0===t||t(i)},u.onMouseEnter=function(){null===a||void 0===a||a(i),document.body.style.cursor="pointer"},u.onMouseLeave=function(){null===o||void 0===o||o(i),document.body.style.cursor="default"},u.data=i,u}))}({cardAreaInfoArr:B,cardAreaSize:w.cardAreaSize,onCardAreaMouseEnter:W,onCardAreaMouseLeave:U,onCardAreaMouseClick:G})}),[B,f,W,U,G]),q=v((function(){return J().concat($())}),[J,$]);return Object(a.useEffect)((function(){if(r.current){var e=q();return function(){e.forEach((function(e){return e.remove()}))}}return function(){}}),[r.current,q]),[r]},x=(r(18),function(){var e=P(),n=Object(u.a)(e,1)[0];return o.a.createElement("div",null,o.a.createElement("canvas",{ref:n,id:"animal-canvas"}))});var B=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.420b6645.chunk.js.map